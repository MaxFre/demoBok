<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Var kan jag streama?</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', sans-serif;
      background: #0d0d14;
      color: #e2e8f0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      width: 100%;
      padding: 60px 20px 30px;
      text-align: center;
    }

    header h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 6vw, 3.8rem);
      background: linear-gradient(90deg, #a78bfa, #f0c060, #f87171);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }

    header p {
      color: #6b7fa0;
      font-size: 1rem;
      font-weight: 300;
    }

    #api-banner {
      background: #1e1030;
      border: 1px solid #7c3aed50;
      border-radius: 12px;
      padding: 14px 20px;
      max-width: 700px;
      width: calc(100% - 40px);
      margin: 0 auto 24px;
      font-size: 0.85rem;
      color: #c084fc;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    #api-banner a { color: #f0c060; text-decoration: underline; }

    #api-banner input {
      flex: 1;
      min-width: 160px;
      background: #0d0d14;
      border: 1px solid #7c3aed50;
      border-radius: 8px;
      padding: 6px 12px;
      color: #e2e8f0;
      font-size: 0.83rem;
      outline: none;
      font-family: monospace;
    }

    #api-banner input:focus { border-color: #a78bfa; }

    .search-wrap {
      position: relative;
      width: 100%;
      max-width: 700px;
      padding: 0 20px;
      margin-bottom: 8px;
    }

    .search-wrap input {
      width: 100%;
      background: #161626;
      border: 2px solid #2a2a4a;
      border-radius: 16px;
      padding: 18px 60px 18px 24px;
      font-size: 1.1rem;
      color: #e2e8f0;
      outline: none;
      transition: border-color 0.25s, box-shadow 0.25s;
      font-family: 'Inter', sans-serif;
    }

    .search-wrap input::placeholder { color: #404060; }

    .search-wrap input:focus {
      border-color: #a78bfa;
      box-shadow: 0 0 0 4px #a78bfa18;
    }

    .search-wrap .search-icon {
      position: absolute;
      right: 36px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.3rem;
      pointer-events: none;
    }

    #suggestions {
      width: calc(100% - 40px);
      max-width: 700px;
      background: #161626;
      border: 1px solid #2a2a4a;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 32px;
      display: none;
    }

    .suggestion-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 16px;
      cursor: pointer;
      transition: background 0.15s;
      border-bottom: 1px solid #1e1e30;
    }

    .suggestion-item:last-child { border-bottom: none; }
    .suggestion-item:hover { background: #1e1e38; }

    .suggestion-item img {
      width: 36px;
      height: 54px;
      object-fit: cover;
      border-radius: 6px;
      background: #2a2a4a;
      flex-shrink: 0;
    }

    .sug-poster-placeholder {
      width: 36px;
      height: 54px;
      border-radius: 6px;
      background: #2a2a4a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .sug-title { font-weight: 600; font-size: 0.95rem; }
    .sug-year { color: #6b7fa0; font-size: 0.8rem; margin-top: 2px; }

    #result {
      width: calc(100% - 40px);
      max-width: 900px;
      margin-bottom: 60px;
      display: none;
    }

    .show-header {
      display: flex;
      gap: 24px;
      margin-bottom: 32px;
      align-items: flex-start;
    }

    .show-poster {
      width: 130px;
      min-width: 130px;
      height: 195px;
      border-radius: 12px;
      object-fit: cover;
      box-shadow: 0 8px 32px #00000080;
    }

    .show-poster-placeholder {
      width: 130px;
      min-width: 130px;
      height: 195px;
      border-radius: 12px;
      background: #1e1e30;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
    }

    .show-meta { flex: 1; padding-top: 4px; }

    .show-meta h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.4rem, 3vw, 2rem);
      color: #f0f0f0;
      margin-bottom: 6px;
      line-height: 1.2;
    }

    .year-genre { color: #6b7fa0; font-size: 0.88rem; margin-bottom: 12px; }

    .overview {
      font-size: 0.9rem;
      color: #94a3b8;
      line-height: 1.6;
      display: -webkit-box;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .stream-section {
      background: #12121f;
      border: 1px solid #1e1e30;
      border-radius: 16px;
      padding: 24px;
    }

    .stream-section h3 {
      font-size: 1rem;
      font-weight: 600;
      color: #a78bfa;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stream-category { margin-bottom: 22px; }
    .stream-category:last-child { margin-bottom: 0; }

    .stream-category-label {
      font-size: 0.75rem;
      color: #4a5568;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .provider-list {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }

    .provider {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .provider img {
      width: 56px;
      height: 56px;
      border-radius: 12px;
      box-shadow: 0 4px 12px #00000060;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .provider:hover img {
      transform: scale(1.1);
      box-shadow: 0 8px 20px #00000080;
    }

    .provider span {
      font-size: 0.7rem;
      color: #6b7fa0;
      text-align: center;
      max-width: 70px;
    }

    .no-stream {
      padding: 32px;
      text-align: center;
      color: #4a5568;
      font-size: 1rem;
    }

    .no-stream .emoji { font-size: 2.5rem; display: block; margin-bottom: 10px; }

    #loading {
      display: none;
      padding: 40px;
      text-align: center;
      color: #6b7fa0;
    }

    .loader {
      display: inline-block;
      width: 38px;
      height: 38px;
      border: 3px solid #2a2a4a;
      border-top-color: #a78bfa;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 12px;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    footer {
      margin-top: auto;
      padding: 20px;
      text-align: center;
      font-size: 0.78rem;
      color: #2a3040;
    }

    @media (max-width: 500px) {
      .show-header { flex-direction: column; }
      .show-poster, .show-poster-placeholder { width: 100%; min-width: unset; height: 200px; }
    }
  </style>
</head>
<body>

<header>
  <h1>üì∫ Var kan jag streama?</h1>
  <p>S√∂k efter en serie och se var du kan titta i Sverige</p>
</header>

<div id="api-banner">
  <span>üîë</span>
  <span>TMDB API-nyckel (<a href="https://www.themoviedb.org/settings/api" target="_blank">gratis h√§r</a>):</span>
  <input type="text" id="apiKeyInput" placeholder="Klistra in din API-nyckel h√§r..." />
</div>

<div class="search-wrap">
  <input type="text" id="searchInput" placeholder="S√∂k p√• en serie, t.ex. Succession, Breaking Bad..." autocomplete="off" />
  <span class="search-icon">üîç</span>
</div>

<div id="suggestions"></div>

<div id="loading">
  <div class="loader"></div>
  <div>S√∂ker streaminginfo...</div>
</div>

<div id="result"></div>

<footer>
  Data fr√•n <a href="https://www.themoviedb.org" target="_blank" style="color:#4a5568">TMDb</a> &amp; JustWatch &mdash; Streaminginfo g√§ller f√∂r Sverige üá∏üá™
</footer>

<script>
  const searchInput = document.getElementById('searchInput');
  const suggestionsEl = document.getElementById('suggestions');
  const resultEl = document.getElementById('result');
  const loadingEl = document.getElementById('loading');
  const apiKeyInput = document.getElementById('apiKeyInput');

  const savedKey = localStorage.getItem('tmdb_key');
  if (savedKey) apiKeyInput.value = savedKey;

  apiKeyInput.addEventListener('change', () => {
    localStorage.setItem('tmdb_key', apiKeyInput.value.trim());
  });

  function getKey() {
    return apiKeyInput.value.trim() || localStorage.getItem('tmdb_key') || '';
  }

  let debounceTimer;

  searchInput.addEventListener('input', () => {
    clearTimeout(debounceTimer);
    const q = searchInput.value.trim();
    if (q.length < 2) { suggestionsEl.style.display = 'none'; return; }
    debounceTimer = setTimeout(() => searchShows(q), 350);
  });

  searchInput.addEventListener('keydown', e => {
    if (e.key === 'Escape') suggestionsEl.style.display = 'none';
  });

  document.addEventListener('click', e => {
    if (!e.target.closest('.search-wrap') && !e.target.closest('#suggestions'))
      suggestionsEl.style.display = 'none';
  });

  async function searchShows(query) {
    const key = getKey();
    if (!key) { alert('Ange en TMDB API-nyckel f√∂rst!'); return; }
    try {
      const res = await fetch(
        `https://api.themoviedb.org/3/search/tv?query=${encodeURIComponent(query)}&api_key=${key}&language=sv-SE&page=1`
      );
      if (!res.ok) {
        if (res.status === 401) alert('Ogiltig API-nyckel. Kontrollera din TMDB-nyckel.');
        return;
      }
      const data = await res.json();
      renderSuggestions(data.results.slice(0, 7));
    } catch (err) { console.error(err); }
  }

  function renderSuggestions(shows) {
    if (!shows.length) { suggestionsEl.style.display = 'none'; return; }
    suggestionsEl.innerHTML = shows.map(s => {
      const year = s.first_air_date ? s.first_air_date.slice(0, 4) : '‚Äì';
      const poster = s.poster_path
        ? `<img src="https://image.tmdb.org/t/p/w92${s.poster_path}" alt="${s.name}">`
        : `<div class="sug-poster-placeholder">üé¨</div>`;
      return `
        <div class="suggestion-item" data-id="${s.id}">
          ${poster}
          <div>
            <div class="sug-title">${s.name}</div>
            <div class="sug-year">${year}${s.origin_country?.length ? ' ¬∑ ' + s.origin_country.join(', ') : ''}</div>
          </div>
        </div>`;
    }).join('');
    suggestionsEl.style.display = 'block';
    suggestionsEl.querySelectorAll('.suggestion-item').forEach(el => {
      el.addEventListener('click', () => {
        searchInput.value = el.querySelector('.sug-title').textContent;
        suggestionsEl.style.display = 'none';
        loadShow(el.dataset.id);
      });
    });
  }

  async function loadShow(id) {
    const key = getKey();
    resultEl.style.display = 'none';
    loadingEl.style.display = 'block';
    try {
      const [detailsRes, providersRes] = await Promise.all([
        fetch(`https://api.themoviedb.org/3/tv/${id}?api_key=${key}&language=sv-SE`),
        fetch(`https://api.themoviedb.org/3/tv/${id}/watch/providers?api_key=${key}`)
      ]);
      const details = await detailsRes.json();
      const providersData = await providersRes.json();
      renderResult(details, providersData.results?.SE || null);
    } catch (err) { console.error(err); }
    finally { loadingEl.style.display = 'none'; }
  }

  function renderResult(show, providers) {
    const poster = show.poster_path
      ? `<img class="show-poster" src="https://image.tmdb.org/t/p/w300${show.poster_path}" alt="${show.name}">`
      : `<div class="show-poster-placeholder">üé¨</div>`;

    const year = show.first_air_date ? show.first_air_date.slice(0, 4) : '‚Äì';
    const genres = show.genres?.map(g => g.name).join(', ') || '‚Äì';
    const overview = show.overview || 'Ingen beskrivning tillg√§nglig.';

    const categories = [
      { key: 'flatrate', label: '‚úÖ Ing√•r i prenumeration' },
      { key: 'free',     label: 'üÜì Gratis' },
      { key: 'ads',      label: 'üì∫ Gratis med reklam' },
      { key: 'rent',     label: 'üí∏ Hyrs' },
      { key: 'buy',      label: 'üõí K√∂ps' },
    ];

    let streamHtml = '';
    if (!providers) {
      streamHtml = `<div class="no-stream"><span class="emoji">üòî</span>Inga streamingalternativ hittades f√∂r Sverige.</div>`;
    } else {
      const sections = categories
        .filter(c => providers[c.key]?.length)
        .map(c => `
          <div class="stream-category">
            <div class="stream-category-label">${c.label}</div>
            <div class="provider-list">
              ${providers[c.key].map(p => `
                <div class="provider">
                  <img src="https://image.tmdb.org/t/p/original${p.logo_path}" alt="${p.provider_name}" title="${p.provider_name}">
                  <span>${p.provider_name}</span>
                </div>`).join('')}
            </div>
          </div>`).join('');
      streamHtml = sections || `<div class="no-stream"><span class="emoji">üòî</span>Hittades inte p√• svenska streamingtj√§nster.</div>`;
    }

    const justWatchUrl = providers?.link || `https://www.justwatch.com/se/s%C3%B6k?q=${encodeURIComponent(show.name)}`;

    resultEl.innerHTML = `
      <div class="show-header">
        ${poster}
        <div class="show-meta">
          <h2>${show.name}</h2>
          <div class="year-genre">${year} &middot; ${genres}</div>
          <p class="overview">${overview}</p>
        </div>
      </div>
      <div class="stream-section">
        <h3>üá∏üá™ Tillg√§nglig i Sverige via</h3>
        ${streamHtml}
        <div style="margin-top:20px;text-align:right">
          <a href="${justWatchUrl}" target="_blank" rel="noopener"
            style="font-size:0.8rem;color:#a78bfa;text-decoration:none;opacity:0.7">
            Visa p√• JustWatch ‚Üí
          </a>
        </div>
      </div>`;

    resultEl.style.display = 'block';
    resultEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
</script>

</body>
</html>
  <title>Popul√§ra B√∂cker i Sverige</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', sans-serif;
      background: #0f0f0f;
      color: #e8e8e8;
      min-height: 100vh;
    }

    header {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      padding: 60px 20px 40px;
      text-align: center;
      border-bottom: 1px solid #ffffff15;
    }

    header h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 5vw, 3.5rem);
      color: #f0c060;
      letter-spacing: 1px;
      margin-bottom: 12px;
    }

    header p {
      font-size: 1.1rem;
      color: #a0b4cc;
      font-weight: 300;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 30px 20px 10px;
    }

    .filter-btn {
      background: #1e1e2e;
      color: #a0b4cc;
      border: 1px solid #ffffff20;
      padding: 8px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.25s;
    }

    .filter-btn:hover,
    .filter-btn.active {
      background: #f0c060;
      color: #0f0f0f;
      border-color: #f0c060;
      font-weight: 600;
    }

    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px 60px;
    }

    .genre-section {
      margin-bottom: 50px;
    }

    .genre-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.6rem;
      color: #f0c060;
      margin-bottom: 20px;
      padding-bottom: 8px;
      border-bottom: 2px solid #f0c06030;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .genre-title .icon { font-size: 1.4rem; }

    .books-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 24px;
    }

    .book-card {
      background: #1a1a2e;
      border: 1px solid #ffffff10;
      border-radius: 14px;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: default;
    }

    .book-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px #00000080;
    }

    .book-cover {
      width: 100%;
      height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3.5rem;
      font-weight: bold;
      position: relative;
      overflow: hidden;
      background: #111827;
    }

    .book-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.4s;
    }

    .book-card:hover .book-cover img {
      transform: scale(1.05);
    }

    .book-cover .spinner {
      width: 32px;
      height: 32px;
      border: 3px solid #ffffff15;
      border-top-color: #f0c060;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .book-info {
      padding: 16px;
    }

    .book-title {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      color: #f0f0f0;
      margin-bottom: 4px;
      line-height: 1.3;
    }

    .book-title a {
      color: inherit;
      text-decoration: none;
      transition: color 0.2s;
    }

    .book-title a:hover {
      color: #f0c060;
      text-decoration: underline;
    }

    .book-author {
      font-size: 0.82rem;
      color: #7a90a8;
      margin-bottom: 10px;
    }

    .book-genre-tag {
      display: inline-block;
      font-size: 0.72rem;
      padding: 3px 10px;
      border-radius: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stars {
      color: #f0c060;
      font-size: 0.85rem;
      margin-bottom: 6px;
    }

    footer {
      text-align: center;
      padding: 24px;
      color: #445566;
      font-size: 0.82rem;
      border-top: 1px solid #ffffff10;
    }
  </style>
</head>
<body>

<header>
  <h1>üìö Popul√§ra B√∂cker i Sverige</h1>
  <p>Utvalda rekommendationer inom olika genrer &mdash; n√•got f√∂r alla smaker</p>
</header>

<div class="filters">
  <button class="filter-btn active" onclick="filterGenre('alla', this)">Alla</button>
  <button class="filter-btn" onclick="filterGenre('thriller', this)">Thriller</button>
  <button class="filter-btn" onclick="filterGenre('roman', this)">Roman</button>
  <button class="filter-btn" onclick="filterGenre('fantasy', this)">Fantasy</button>
  <button class="filter-btn" onclick="filterGenre('deckare', this)">Deckare</button>
  <button class="filter-btn" onclick="filterGenre('barnbok', this)">Barnbok</button>
  <button class="filter-btn" onclick="filterGenre('facklitteratur', this)">Facklitteratur</button>
</div>

<main>

  <!-- THRILLER -->
  <div class="genre-section" data-genre="thriller">
    <h2 class="genre-title"><span class="icon">üî™</span> Thriller</h2>
    <div class="books-grid">
      <div class="book-card">
        <div class="book-cover" data-q="M√§n som hatar kvinnor Stieg Larsson"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=M%C3%A4n+som+hatar+kvinnor" target="_blank" rel="noopener">M√§n som hatar kvinnor</a></div>
          <div class="book-author">Stieg Larsson</div>
          <span class="book-genre-tag" style="background:#4a0a0a;color:#ff6666">Thriller</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Hypnotis√∂ren Lars Kepler"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Hypnotis%C3%B6ren" target="_blank" rel="noopener">Hypnotis√∂ren</a></div>
          <div class="book-author">Lars Kepler</div>
          <span class="book-genre-tag" style="background:#1a1a5a;color:#8888ff">Thriller</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="De som d√∂dar Camilla L√§ckberg"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=De+som+d%C3%B6dar" target="_blank" rel="noopener">De som d√∂dar</a></div>
          <div class="book-author">Camilla L√§ckberg</div>
          <span class="book-genre-tag" style="background:#3a0a3a;color:#cc66cc">Thriller</span>
        </div>
      </div>
    </div>
  </div>

  <!-- DECKARE -->
  <div class="genre-section" data-genre="deckare">
    <h2 class="genre-title"><span class="icon">üîç</span> Deckare</h2>
    <div class="books-grid">
      <div class="book-card">
        <div class="book-cover" data-q="Faceless Killers Henning Mankell"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Faceless+Killers" target="_blank" rel="noopener">Faceless Killers</a></div>
          <div class="book-author">Henning Mankell</div>
          <span class="book-genre-tag" style="background:#1a3a1a;color:#66cc66">Deckare</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Isjakten √Ösa Larsson"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Isjakten" target="_blank" rel="noopener">Isjakten</a></div>
          <div class="book-author">√Ösa Larsson</div>
          <span class="book-genre-tag" style="background:#3a3a0a;color:#cccc44">Deckare</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Offer Camilla Grebe"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Offer+Camilla+Grebe" target="_blank" rel="noopener">Camilla Grebe ‚Äì Offer</a></div>
          <div class="book-author">Camilla Grebe</div>
          <span class="book-genre-tag" style="background:#0a2a3a;color:#44aacc">Deckare</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ROMAN -->
  <div class="genre-section" data-genre="roman">
    <h2 class="genre-title"><span class="icon">üíõ</span> Roman</h2>
    <div class="books-grid">
      <div class="book-card">
        <div class="book-cover" data-q="En man som heter Ove Fredrik Backman"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=En+man+som+heter+Ove" target="_blank" rel="noopener">En man som heter Ove</a></div>
          <div class="book-author">Fredrik Backman</div>
          <span class="book-genre-tag" style="background:#3a2010;color:#ffaa44">Roman</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="R√∂da Rummet August Strindberg"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=R%C3%B6da+Rummet" target="_blank" rel="noopener">R√∂da Rummet</a></div>
          <div class="book-author">August Strindberg</div>
          <span class="book-genre-tag" style="background:#201030;color:#cc88ff">Roman</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Br√∂derna Lejonhj√§rta Astrid Lindgren"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Br%C3%B6derna+Lej%C3%B6nhj%C3%A4rta" target="_blank" rel="noopener">Br√∂derna Lejonhj√§rta</a></div>
          <div class="book-author">Astrid Lindgren</div>
          <span class="book-genre-tag" style="background:#102a18;color:#66cc88">Roman</span>
        </div>
      </div>
    </div>
  </div>

  <!-- FANTASY -->
  <div class="genre-section" data-genre="fantasy">
    <h2 class="genre-title"><span class="icon">üêâ</span> Fantasy</h2>
    <div class="books-grid">
      <div class="book-card">
        <div class="book-cover" data-q="Lord of the Rings Tolkien"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Sagan+om+ringen" target="_blank" rel="noopener">Sagan om ringen</a></div>
          <div class="book-author">J.R.R. Tolkien</div>
          <span class="book-genre-tag" style="background:#1a0a2a;color:#aa66ff">Fantasy</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Eragon Christopher Paolini"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Eragon" target="_blank" rel="noopener">Eragon</a></div>
          <div class="book-author">Christopher Paolini</div>
          <span class="book-genre-tag" style="background:#102030;color:#6699ff">Fantasy</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="The Name of the Wind Patrick Rothfuss"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=The+Name+of+the+Wind" target="_blank" rel="noopener">The Name of the Wind</a></div>
          <div class="book-author">Patrick Rothfuss</div>
          <span class="book-genre-tag" style="background:#20200a;color:#ddcc44">Fantasy</span>
        </div>
      </div>
    </div>
  </div>

  <!-- BARNBOK -->
  <div class="genre-section" data-genre="barnbok">
    <h2 class="genre-title"><span class="icon">üé®</span> Barnbok</h2>
    <div class="books-grid">
      <div class="book-card">
        <div class="book-cover" data-q="Pippi Longstocking Astrid Lindgren"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Pippi+L%C3%A5ngstrump" target="_blank" rel="noopener">Pippi L√•ngstrump</a></div>
          <div class="book-author">Astrid Lindgren</div>
          <span class="book-genre-tag" style="background:#3a1010;color:#ff8844">Barnbok</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Emil i L√∂nneberga Astrid Lindgren"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Emil+i+L%C3%B6nneberga" target="_blank" rel="noopener">Emil i L√∂nneberga</a></div>
          <div class="book-author">Astrid Lindgren</div>
          <span class="book-genre-tag" style="background:#103a10;color:#66dd66">Barnbok</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Alfons √Öberg Gunilla Bergstr√∂m"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Alfons+%C3%85berg" target="_blank" rel="noopener">Alfons √Öberg</a></div>
          <div class="book-author">Gunilla Bergstr√∂m</div>
          <span class="book-genre-tag" style="background:#10103a;color:#8888ff">Barnbok</span>
        </div>
      </div>
    </div>
  </div>

  <!-- FACKLITTERATUR -->
  <div class="genre-section" data-genre="facklitteratur">
    <h2 class="genre-title"><span class="icon">üß†</span> Facklitteratur</h2>
    <div class="books-grid">
      <div class="book-card">
        <div class="book-cover" data-q="Sapiens Yuval Noah Harari"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Sapiens" target="_blank" rel="noopener">Sapiens</a></div>
          <div class="book-author">Yuval Noah Harari</div>
          <span class="book-genre-tag" style="background:#102020;color:#44cccc">Fakta</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Thinking Fast and Slow Daniel Kahneman"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=T%C3%A4nka+snabbt+och+l%C3%A5ngsamt" target="_blank" rel="noopener">T√§nka, snabbt och l√•ngsamt</a></div>
          <div class="book-author">Daniel Kahneman</div>
          <span class="book-genre-tag" style="background:#201010;color:#ff8888">Fakta</span>
        </div>
      </div>
      <div class="book-card">
        <div class="book-cover" data-q="Factfulness Hans Rosling"><div class="spinner"></div></div>
        <div class="book-info">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <div class="book-title"><a href="https://www.adlibris.com/se/sok?q=Factfulness" target="_blank" rel="noopener">Factfulness</a></div>
          <div class="book-author">Hans Rosling</div>
          <span class="book-genre-tag" style="background:#102010;color:#88cc88">Fakta</span>
        </div>
      </div>
    </div>
  </div>

</main>

<footer>
  &copy; 2026 Bokrekommendationer Sverige &mdash; Alla genrer, en plats.
</footer>

<script>
  function filterGenre(genre, btn) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.genre-section').forEach(section => {
      section.style.display = (genre === 'alla' || section.dataset.genre === genre) ? '' : 'none';
    });
  }

  async function loadCovers() {
    const covers = document.querySelectorAll('.book-cover[data-q]');
    const fetches = Array.from(covers).map(async el => {
      const q = encodeURIComponent(el.dataset.q);
      try {
        const res = await fetch(`https://www.googleapis.com/books/v1/volumes?q=${q}&maxResults=1&fields=items(volumeInfo/imageLinks)`);
        const data = await res.json();
        const links = data.items?.[0]?.volumeInfo?.imageLinks;
        const src = links?.extraLarge || links?.large || links?.medium || links?.thumbnail;
        if (src) {
          const img = document.createElement('img');
          img.src = src.replace('http:', 'https:').replace('zoom=1', 'zoom=2');
          img.alt = el.dataset.q;
          img.loading = 'lazy';
          el.innerHTML = '';
          el.appendChild(img);
        } else {
          el.innerHTML = 'üìö';
          el.style.fontSize = '3.5rem';
        }
      } catch {
        el.innerHTML = 'üìö';
        el.style.fontSize = '3.5rem';
      }
    });
    await Promise.all(fetches);
  }

  loadCovers();
</script>

</body>
</html>
